{"ast":null,"code":"import { map, filter, debounceTime, mergeMap } from 'rxjs/operators';\nimport { fromEvent } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../pokedex-dahsboard.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../store\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../component/pokemon-card/pokemon-card.component\";\n\nfunction PokedexlistComponent_div_0_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 4)(1, \"a\")(2, \"pokemon-card\", 5);\n    i0.ɵɵlistener(\"view\", function PokedexlistComponent_div_0_li_2_Template_pokemon_card_view_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const pokemon_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.handleView(pokemon_r3);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const pokemon_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"detail\", pokemon_r3);\n  }\n}\n\nfunction PokedexlistComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"ul\", 2);\n    i0.ɵɵtemplate(2, PokedexlistComponent_div_0_li_2_Template, 3, 1, \"li\", 3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const pokemonDetail_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", pokemonDetail_r1.results);\n  }\n}\n\nconst POKEDEX_API = 'https://pokeapi.co/api/v2/pokemon?offset=0&limit=12';\nexport class PokedexlistComponent {\n  constructor(pokedexService, router, store) {\n    this.pokedexService = pokedexService;\n    this.router = router;\n    this.store = store; // pokemonDetail: PokemonDetail[] = [];\n\n    this.pageByScroll$ = fromEvent(window, 'scroll');\n    this.numberOfItems = 12; // number of items in a page\n\n    this.itemHeight = 1000;\n    this.showLoadMore = true;\n    this.showLoader = false;\n  }\n\n  ngOnInit() {\n    this.pokedexResults$ = this.store.select('next', 'previous', 'results');\n    this.pokedexService.getPokemon(POKEDEX_API).subscribe();\n    /*  this.pokedexService.getPokemon(POKEDEX_API)\n      .subscribe(response=> {\n        this.pokemonList$ = response.results;\n        this.pokedexPaginationUrl = response.next\n      })*/\n  }\n\n  ngAfterViewInit() {\n    console.log('this.pokedexResults$');\n    this.pageByScroll$.pipe(map(() => window.scrollY), filter(current => current >= document.body.clientHeight - window.innerHeight), debounceTime(200), mergeMap(() => {\n      this.showLoader = true;\n      return this.pokedexService.getPokemon(this.pokedexPaginationUrl);\n    })).subscribe(response => {\n      /* const results = response.results\n       this.pokemonDetail = [...this.pokemonDetail, ...results];\n       this.pokedexPaginationUrl = response.next;\n       this.showLoadMore = false;*/\n    });\n  }\n\n  loadMorePokemon() {\n    this.showLoadMore = false;\n    this.showLoader = true;\n    this.pokedexResults$ = this.store.select('next', 'previous', 'results');\n    this.pokedexService.getPokemon(POKEDEX_API).subscribe();\n  }\n\n  handleView(event) {\n    console.log('event', event);\n    this.router.navigate(['/pokedex', event.name, event.id]);\n  }\n\n}\n\nPokedexlistComponent.ɵfac = function PokedexlistComponent_Factory(t) {\n  return new (t || PokedexlistComponent)(i0.ɵɵdirectiveInject(i1.PokedexDashboardService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Store));\n};\n\nPokedexlistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PokedexlistComponent,\n  selectors: [[\"pokedex-list\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[\"class\", \"flex-1\", 4, \"ngIf\"], [1, \"flex-1\"], [1, \"flex\", \"flex-wrap\", \"justify-center\", \"mx-auto\"], [\"class\", \"pokemon-figure mx-3 mb-12\", 4, \"ngFor\", \"ngForOf\"], [1, \"pokemon-figure\", \"mx-3\", \"mb-12\"], [3, \"detail\", \"view\"]],\n  template: function PokedexlistComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, PokedexlistComponent_div_0_Template, 3, 1, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelement(2, \"router-outlet\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.pokedexResults$));\n    }\n  },\n  directives: [i4.NgIf, i4.NgForOf, i5.PokemonCardComponent, i2.RouterOutlet],\n  pipes: [i4.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"sources":["/Users/nancy.guerrero/Desktop/angular-pokedex/src/app/pokedex-dashboard/container/pokedex-list/pokedex-list.component.ts"],"names":["map","filter","debounceTime","mergeMap","fromEvent","i0","i1","i2","i3","i4","i5","PokedexlistComponent_div_0_li_2_Template","rf","ctx","_r5","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","PokedexlistComponent_div_0_li_2_Template_pokemon_card_view_2_listener","restoredCtx","ɵɵrestoreView","pokemon_r3","$implicit","ctx_r4","ɵɵnextContext","handleView","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","PokedexlistComponent_div_0_Template","ɵɵtemplate","pokemonDetail_r1","ngIf","results","POKEDEX_API","PokedexlistComponent","constructor","pokedexService","router","store","pageByScroll$","window","numberOfItems","itemHeight","showLoadMore","showLoader","ngOnInit","pokedexResults$","select","getPokemon","subscribe","ngAfterViewInit","console","log","pipe","scrollY","current","document","body","clientHeight","innerHeight","pokedexPaginationUrl","response","loadMorePokemon","event","navigate","name","id","ɵfac","PokedexlistComponent_Factory","t","ɵɵdirectiveInject","PokedexDashboardService","Router","Store","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PokedexlistComponent_Template","ɵɵpipe","ɵɵelement","ɵɵpipeBind1","directives","NgIf","NgForOf","PokemonCardComponent","RouterOutlet","pipes","AsyncPipe","encapsulation"],"mappings":"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","sourcesContent":["import { map, filter, debounceTime, mergeMap } from 'rxjs/operators';\nimport { fromEvent } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../pokedex-dahsboard.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../store\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../component/pokemon-card/pokemon-card.component\";\nfunction PokedexlistComponent_div_0_li_2_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 4)(1, \"a\")(2, \"pokemon-card\", 5);\n    i0.ɵɵlistener(\"view\", function PokedexlistComponent_div_0_li_2_Template_pokemon_card_view_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r5); const pokemon_r3 = restoredCtx.$implicit; const ctx_r4 = i0.ɵɵnextContext(2); return ctx_r4.handleView(pokemon_r3); });\n    i0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const pokemon_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"detail\", pokemon_r3);\n} }\nfunction PokedexlistComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"ul\", 2);\n    i0.ɵɵtemplate(2, PokedexlistComponent_div_0_li_2_Template, 3, 1, \"li\", 3);\n    i0.ɵɵelementEnd()();\n} if (rf & 2) {\n    const pokemonDetail_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", pokemonDetail_r1.results);\n} }\nconst POKEDEX_API = 'https://pokeapi.co/api/v2/pokemon?offset=0&limit=12';\nexport class PokedexlistComponent {\n    constructor(pokedexService, router, store) {\n        this.pokedexService = pokedexService;\n        this.router = router;\n        this.store = store;\n        // pokemonDetail: PokemonDetail[] = [];\n        this.pageByScroll$ = fromEvent(window, 'scroll');\n        this.numberOfItems = 12; // number of items in a page\n        this.itemHeight = 1000;\n        this.showLoadMore = true;\n        this.showLoader = false;\n    }\n    ngOnInit() {\n        this.pokedexResults$ = this.store.select('next', 'previous', 'results');\n        this.pokedexService.getPokemon(POKEDEX_API).subscribe();\n        /*  this.pokedexService.getPokemon(POKEDEX_API)\n          .subscribe(response=> {\n            this.pokemonList$ = response.results;\n            this.pokedexPaginationUrl = response.next\n          })*/\n    }\n    ngAfterViewInit() {\n        console.log('this.pokedexResults$');\n        this.pageByScroll$.pipe(map(() => window.scrollY), filter((current) => current >= document.body.clientHeight - window.innerHeight), debounceTime(200), mergeMap(() => {\n            this.showLoader = true;\n            return this.pokedexService.getPokemon(this.pokedexPaginationUrl);\n        })).subscribe((response) => {\n            /* const results = response.results\n             this.pokemonDetail = [...this.pokemonDetail, ...results];\n             this.pokedexPaginationUrl = response.next;\n             this.showLoadMore = false;*/\n        });\n    }\n    loadMorePokemon() {\n        this.showLoadMore = false;\n        this.showLoader = true;\n        this.pokedexResults$ = this.store.select('next', 'previous', 'results');\n        this.pokedexService.getPokemon(POKEDEX_API).subscribe();\n    }\n    handleView(event) {\n        console.log('event', event);\n        this.router.navigate(['/pokedex', event.name, event.id]);\n    }\n}\nPokedexlistComponent.ɵfac = function PokedexlistComponent_Factory(t) { return new (t || PokedexlistComponent)(i0.ɵɵdirectiveInject(i1.PokedexDashboardService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Store)); };\nPokedexlistComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PokedexlistComponent, selectors: [[\"pokedex-list\"]], decls: 3, vars: 3, consts: [[\"class\", \"flex-1\", 4, \"ngIf\"], [1, \"flex-1\"], [1, \"flex\", \"flex-wrap\", \"justify-center\", \"mx-auto\"], [\"class\", \"pokemon-figure mx-3 mb-12\", 4, \"ngFor\", \"ngForOf\"], [1, \"pokemon-figure\", \"mx-3\", \"mb-12\"], [3, \"detail\", \"view\"]], template: function PokedexlistComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, PokedexlistComponent_div_0_Template, 3, 1, \"div\", 0);\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵelement(2, \"router-outlet\");\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.pokedexResults$));\n    } }, directives: [i4.NgIf, i4.NgForOf, i5.PokemonCardComponent, i2.RouterOutlet], pipes: [i4.AsyncPipe], encapsulation: 2 });\n"]},"metadata":{},"sourceType":"module"}