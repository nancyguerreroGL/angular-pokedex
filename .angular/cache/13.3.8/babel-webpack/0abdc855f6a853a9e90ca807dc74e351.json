{"ast":null,"code":"import { forkJoin } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst POKEDEX_API = 'https://pokeapi.co/api/v2/pokemon/';\nconst POKEDEX_IMAGE_BASE_URL = \"https://assets.pokemon.com/assets/cms2/img/pokedex/detail/\";\nconst POKEDEX_IMAGE_BASE_FULL = \"https://assets.pokemon.com/assets/cms2/img/pokedex/full/\";\nconst POKEMON_SPECIES = \"https://pokeapi.co/api/v2/pokemon-species/\";\nconst POKEDEX_IMAGE_FORMAT = '.png';\n\nconst baseImgUrl = isFullImg => isFullImg ? `${POKEDEX_IMAGE_BASE_FULL}` : `${POKEDEX_IMAGE_BASE_URL}`;\n\nconst getImageZeroDigit = (id, isFullImg) => {\n  const baseImg = baseImgUrl(isFullImg);\n  return id.length < 2 ? `${baseImg}00${id}` : `${baseImg}0${id}`;\n};\n\nconst getPokedex_image_base_number = (value, isFullImg) => {\n  const convertId = value.toString();\n\n  if (convertId.length < 3) {\n    return getImageZeroDigit(convertId, isFullImg);\n  }\n\n  return `${baseImgUrl(isFullImg)}${convertId}`;\n};\n\nexport let PokedexDashboardService = /*#__PURE__*/(() => {\n  class PokedexDashboardService {\n    constructor(http) {\n      this.http = http;\n    }\n\n    getPokemon(url) {\n      // get the items\n      return this.http.get(url).pipe(switchMap(items => {\n        const results = items.results;\n        const itemRequests = results.map(item => this.http.get(`${POKEDEX_API}${item.name}`).pipe(map(item => {\n          return Object.assign(Object.assign({}, item), {\n            imageUrl: `${getPokedex_image_base_number(item.id, false)}${POKEDEX_IMAGE_FORMAT}`\n          });\n        })));\n        return forkJoin(itemRequests).pipe(map(itemRequests => {\n          return {\n            next: items.next,\n            results: itemRequests,\n            previous: items.previous\n          };\n        }));\n      }));\n    }\n\n    getPokemonDetail(name, id) {\n      return this.http.get(`${POKEDEX_API}${name}`).pipe(map(item => {\n        return Object.assign(Object.assign({}, item), {\n          imageUrl: `${getPokedex_image_base_number(item.id, true)}${POKEDEX_IMAGE_FORMAT}`\n        });\n      }));\n    }\n\n    getPokemonSpecies(name) {\n      return this.http.get(`${POKEMON_SPECIES}${name}`).pipe(map(item => item));\n    }\n\n  }\n\n  PokedexDashboardService.ɵfac = function PokedexDashboardService_Factory(t) {\n    return new (t || PokedexDashboardService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  PokedexDashboardService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PokedexDashboardService,\n    factory: PokedexDashboardService.ɵfac\n  });\n  return PokedexDashboardService;\n})();","map":null,"metadata":{},"sourceType":"module"}